<!DOCTYPE html>
<html lang="es">
<head>

<meta charset="UTF-8">
<meta name="viewport"
content="width=device-width, initial-scale=1, maximum-scale=1">

<title>Registro Rifa</title>

<style>

body{
margin:0;
background:#111;
color:white;
font-family:-apple-system,BlinkMacSystemFont;
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
padding:20px;
}

.container{
width:100%;
max-width:420px;
text-align:center;
}

h1{
font-size:28px;
margin-bottom:30px;
}

input{
width:100%;
padding:18px;
font-size:18px;
margin:12px 0;
border-radius:12px;
border:none;
}

button{
width:100%;
padding:18px;
font-size:20px;
background:#25D366;
border:none;
border-radius:14px;
color:white;
margin-top:15px;
}

#mensaje{
margin-top:25px;
font-size:20px;
color:#00ffae;
}

</style>
</head>

<body>

<div class="container">

<h1>ðŸŽŸ Registrar Participante</h1>

<input id="nombre" placeholder="Nombre completo">
<input id="telefono" placeholder="TelÃ©fono">

<button onclick="registrar()">
Registrar Participante
</button>

<div id="mensaje"></div>

</div>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>

const firebaseConfig={
apiKey:"AIzaSyCqVZwBX96EHfl3k__iqyc7rF1MZmSVpRI",
authDomain:"rifa-web-2b2f3.firebaseapp.com",
projectId:"rifa-web-2b2f3"
};

firebase.initializeApp(firebaseConfig);
const db=firebase.firestore();

async function registrar(){

let nombre=nombreInput.value;
let telefono=telefonoInput.value;

if(!nombre||!telefono){
alert("Completa datos");
return;
}

let usados=[];
let snap=await db.collection("participantes").get();

snap.forEach(d=>usados.push(d.data().numero));

let libres=[];
for(let i=1;i<=100;i++)
if(!usados.includes(i)) libres.push(i);

let numero=
libres[Math.floor(Math.random()*libres.length)];

await db.collection("participantes").add({
nombre,
telefono,
numero
});

mensaje.innerText=
`âœ… NÃºmero asignado: #${numero}`;

nombreInput.value="";
telefonoInput.value="";
}

const nombreInput=document.getElementById("nombre");
const telefonoInput=document.getElementById("telefono");
const mensaje=document.getElementById("mensaje");

</script>

</body>
</html>
